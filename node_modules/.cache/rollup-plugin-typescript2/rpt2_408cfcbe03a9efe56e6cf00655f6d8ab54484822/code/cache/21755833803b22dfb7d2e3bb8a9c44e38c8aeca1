{"code":"import { isTracking, trackEffects, triggerEffects } from \"./effect\";\r\nimport { toReactive } from \"./reactive\";\r\nclass RefImpl {\r\n    constructor(_rawValue) {\r\n        this._rawValue = _rawValue;\r\n        // _rawValue如果用户传进来的值 是一个对象 我需要将对象转化成响应式\r\n        this._value = toReactive(_rawValue);\r\n    }\r\n    // 类的属性访问器 最终会变成deifneProperty\r\n    get value() {\r\n        if (isTracking()) {\r\n            trackEffects(this.dep || (this.dep = new Set()));\r\n            console.log(this.dep);\r\n        }\r\n        return this._value;\r\n    }\r\n    set value(newValue) {\r\n        if (newValue !== this._rawValue) {\r\n            // 先看一下之前之后是否一样\r\n            this._rawValue = newValue;\r\n            this._value = toReactive(newValue);\r\n            triggerEffects(this.dep);\r\n        }\r\n    }\r\n}\r\nfunction createRef(value) {\r\n    return new RefImpl(value);\r\n}\r\nexport function ref(value) {\r\n    return createRef(value);\r\n}\r\n// export function shallowRef(value){\r\n//   return createRef(value,true);\r\n// }\r\n// reactive readonly \r\n//# sourceMappingURL=ref.js.map","references":["C:/Users/test1/Desktop/vue-topic/vue-train-5/packages/reactivity/src/effect.ts","C:/Users/test1/Desktop/vue-topic/vue-train-5/packages/reactivity/src/reactive.ts"],"map":"{\"version\":3,\"file\":\"ref.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../packages/reactivity/src/ref.ts\"],\"names\":[],\"mappings\":\"AAAA,OAAO,EAAE,UAAU,EAAE,YAAY,EAAE,cAAc,EAAE,MAAM,UAAU,CAAC;AACpE,OAAO,EAAE,UAAU,EAAE,MAAM,YAAY,CAAC;AAExC,MAAM,OAAO;IAIT,YAAmB,SAAS;QAAT,cAAS,GAAT,SAAS,CAAA;QACxB,wCAAwC;QACxC,IAAI,CAAC,MAAM,GAAG,UAAU,CAAC,SAAS,CAAC,CAAA;IACvC,CAAC;IAGD,8BAA8B;IAC9B,IAAI,KAAK;QACL,IAAG,UAAU,EAAE,EAAC;YACZ,YAAY,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,GAAG,IAAI,GAAG,EAAE,CAAC,CAAC,CAAC;YACjD,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,CAAA;SACxB;QACD,OAAO,IAAI,CAAC,MAAM,CAAC;IACvB,CAAC;IACD,IAAI,KAAK,CAAC,QAAQ;QACd,IAAG,QAAQ,KAAK,IAAI,CAAC,SAAS,EAAC;YAC3B,eAAe;YACf,IAAI,CAAC,SAAS,GAAG,QAAQ,CAAC;YAC1B,IAAI,CAAC,MAAM,GAAI,UAAU,CAAC,QAAQ,CAAC,CAAC;YACpC,cAAc,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;SAC5B;IACL,CAAC;CACJ;AAED,SAAS,SAAS,CAAC,KAAK;IAEpB,OAAO,IAAI,OAAO,CAAC,KAAK,CAAC,CAAC;AAC9B,CAAC;AAGD,MAAM,UAAU,GAAG,CAAC,KAAK;IACrB,OAAO,SAAS,CAAC,KAAK,CAAC,CAAC;AAC5B,CAAC;AAED,qCAAqC;AACpC,kCAAkC;AACnC,IAAI;AAEJ,qBAAqB\"}"}
